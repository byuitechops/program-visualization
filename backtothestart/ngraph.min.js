!function(){function e(e,n){if(!n)return-1;if(n.indexOf)return n.indexOf(e);var t,r=n.length;for(t=0;t<r;t+=1)if(n[t]===e)return t;return-1}function n(e,n){this.id=e,this.links=null,this.data=n}function t(e,n){e.links?e.links.push(n):e.links=[n]}function r(e,n,t,r){this.fromId=e,this.toId=n,this.data=t,this.id=r}function o(e,n){return e.toString()+"\ud83d\udc49 "+n.toString()}var i={};function a(e,n){if(!(this instanceof a))return new a(e,n);if(Array.isArray(e)||(n=e,e=[]),n=n||{},this.data=e||[],this.length=this.data.length,this.compare=n.compare||f,this.setNodeId=n.setNodeId||u,this.length>0)for(var t=this.length>>1;t>=0;t--)this._down(t);if(n.setNodeId)for(t=0;t<this.length;++t)this.setNodeId(this.data[t],t)}function u(){}function f(e,n){return e-n}i=a,a.prototype={push:function(e){this.data.push(e),this.setNodeId(e,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},updateItem:function(e){this._down(e),this._up(e)},_up:function(e){for(var n=this.data,t=this.compare,r=this.setNodeId,o=n[e];e>0;){var i=e-1>>1,a=n[i];if(t(o,a)>=0)break;n[e]=a,r(a,e),e=i}n[e]=o,r(o,e)},_down:function(e){for(var n=this.data,t=this.compare,r=this.length>>1,o=n[e],i=this.setNodeId;e<r;){var a=1+(e<<1),u=a+1,f=n[a];if(u<this.length&&t(n[u],f)<0&&(a=u,f=n[u]),t(f,o)>=0)break;n[e]=f,i(f,e),e=a}n[e]=o,i(o,e)}};var d,c=[];"function"==typeof Object.freeze&&Object.freeze(c);var s=function(e,n){var t=e.x-n.x,r=e.y-n.y;return Math.sqrt(t*t+r*r)},h=function(e,n){var t=e.x-n.x,r=e.y-n.y;return Math.abs(t)+Math.abs(r)};function p(e){this.node=e,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}var l,I=function(){var e=0,n=[];return{createNewState:function(t){var r=n[e];return r?(r.node=t,r.parent=null,r.closed=!1,r.open=0,r.distanceToSource=Number.POSITIVE_INFINITY,r.fScore=Number.POSITIVE_INFINITY,r.heapIndex=-1):(r=new p(t),n[e]=r),e++,r},reset:function(){e=0}}};l=function(e,n){var t=(n=n||{}).oriented,r=n.heuristic;r||(r=d.heuristic);var o=n.distance;o||(o=d.distance);var a=I();return{find:function(n,u){var f=e.getNode(n);if(!f)throw new Error("fromId is not defined in this graph: "+n);var c=e.getNode(u);if(!c)throw new Error("toId is not defined in this graph: "+u);if(f===c)return[f];a.reset();var s=t?function(e,n){if(b===v){if(n.fromId===E.node.id)return O(e,n,E)}else if(b===g&&n.toId===E.node.id)return O(e,n,E)}:function(e,n){return O(e,n,E)},h=new Map,p=new i({compare:d.compareFScore,setNodeId:d.setHeapIndex}),l=new i({compare:d.compareFScore,setNodeId:d.setHeapIndex}),I=a.createNewState(f);h.set(n,I),I.fScore=r(f,c),I.distanceToSource=0,p.push(I),I.open=v;var S=a.createNewState(c);S.fScore=r(c,f),S.distanceToSource=0,l.push(S),S.open=g;for(var m,w,T=Number.POSITIVE_INFINITY,k=p,b=v;p.length>0&&l.length>0;){p.length<l.length?(b=v,k=p):(b=g,k=l);var E=k.pop();if(E.closed=!0,!(E.distanceToSource>T)&&(e.forEachLinkedNode(E.node.id,s),m&&w))return y(m,w)}return N;function y(e,n){for(var t=[],r=e;r;)t.push(r.node),r=r.parent;for(var o=n;o;)t.unshift(o.node),o=o.parent;return t}function O(e,n,t){var i,u=h.get(e.id);if(u||(u=a.createNewState(e),h.set(e.id,u)),!u.closed)if((i=u.open)&&i!==b){var d=u.distanceToSource+t.distanceToSource;d<T&&(m=u,w=t,T=d)}else{var s=t.distanceToSource+o(u.node,t.node,n);if(!(s>=u.distanceToSource)){var p=b===v?c:f,l=s+r(u.node,p);l>=T||(u.fScore=l,0===u.open&&(k.push(u),k.updateItem(u.heapIndex),u.open=b),u.parent=t,u.distanceToSource=s)}}}}}};var v=1,g=2,N=(d={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(e,n){return e.fScore-n.fScore},NO_PATH:c,setHeapIndex:function(e,n){e.heapIndex=n},setH1:function(e,n){e.h1=n},setH2:function(e,n){e.h2=n},compareF1Score:function(e,n){return e.f1-n.f1},compareF2Score:function(e,n){return e.f2-n.f2}}).NO_PATH;l.l2=s,l.l1=h;var S;S=function(e,n){var t=(n=n||{}).oriented,r=n.heuristic;r||(r=d.heuristic);var o=n.distance;o||(o=d.distance);var a=I();return{find:function(n,u){var f=e.getNode(n);if(!f)throw new Error("fromId is not defined in this graph: "+n);var c=e.getNode(u);if(!c)throw new Error("toId is not defined in this graph: "+u);a.reset();var s,h,p=new Map,l=new i({compare:d.compareFScore,setNodeId:d.setHeapIndex}),I=a.createNewState(f);for(p.set(n,I),I.fScore=r(f,c),I.distanceToSource=0,l.push(I),I.open=1;l.length>0;){if(s=l.pop(),h=c,s.node===h)return w(s);s.closed=!0,e.forEachLinkedNode(s.node.id,v,t)}return m;function v(e,n){var t=p.get(e.id);if(t||(t=a.createNewState(e),p.set(e.id,t)),!t.closed){0===t.open&&(l.push(t),t.open=1);var i=s.distanceToSource+o(e,s.node,n);i>=t.distanceToSource||(t.parent=s,t.distanceToSource=i,t.fScore=i+r(t.node,c),l.updateItem(t.heapIndex))}}}}};var m=d.NO_PATH;function w(e){for(var n=[e.node],t=e.parent;t;)n.push(t.node),t=t.parent;return n}function T(e){this.node=e,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}S.l2=s,S.l1=h;var k;k=function(e,n){var t=(n=n||{}).oriented,r=n.quitFast,o=n.heuristic;o||(o=d.heuristic);var a=n.distance;a||(a=d.distance);var u,f,c=(u=0,f=[],{createNewState:function(e){var n=f[u];return n?(n.node=e,n.p1=null,n.p2=null,n.closed=!1,n.g1=Number.POSITIVE_INFINITY,n.g2=Number.POSITIVE_INFINITY,n.f1=Number.POSITIVE_INFINITY,n.f2=Number.POSITIVE_INFINITY,n.h1=-1,n.h2=-1):(n=new T(e),f[u]=n),u++,n},reset:function(){u=0}});return{find:function(n,u){var f=e.getNode(n);if(!f)throw new Error("fromId is not defined in this graph: "+n);var s=e.getNode(u);if(!s)throw new Error("toId is not defined in this graph: "+u);c.reset();var h,p=t?function(e,n){if(n.fromId===T.node.id)return E(e,n)}:E,l=t?function(e,n){if(n.toId===T.node.id)return y(e,n)}:y,I=new Map,v=new i({compare:d.compareF1Score,setNodeId:d.setH1}),g=new i({compare:d.compareF2Score,setNodeId:d.setH2}),N=Number.POSITIVE_INFINITY,S=c.createNewState(f);I.set(n,S),S.g1=0;var m=o(f,s);S.f1=m,v.push(S);var w=c.createNewState(s);I.set(u,w),w.g2=0;var T,k=m;for(w.f2=k,g.push(w);g.length&&v.length&&(v.length<g.length?(T=v.pop()).closed||(T.closed=!0,T.f1<N&&T.g1+k-o(f,T.node)<N&&e.forEachLinkedNode(T.node.id,p),v.length>0&&(m=v.peek().f1)):(T=g.pop()).closed||(T.closed=!0,T.f2<N&&T.g2+m-o(T.node,s)<N&&e.forEachLinkedNode(T.node.id,l),g.length>0&&(k=g.peek().f2)),!r||!h););return function(e){if(!e)return b;for(var n=[e.node],t=e.p1;t;)n.push(t.node),t=t.p1;for(var r=e.p2;r;)n.unshift(r.node),r=r.p2;return n}(h);function E(e,n){var t=I.get(e.id);if(t||(t=c.createNewState(e),I.set(e.id,t)),!t.closed){var r=T.g1+a(T.node,e,n);r<t.g1&&(t.g1=r,t.f1=r+o(t.node,s),t.p1=T,t.h1<0?v.push(t):v.updateItem(t.h1));var i=t.g1+t.g2;i<N&&(N=i,h=t)}}function y(e,n){var t=I.get(e.id);if(t||(t=c.createNewState(e),I.set(e.id,t)),!t.closed){var r=T.g2+a(T.node,e,n);r<t.g2&&(t.g2=r,t.f2=r+o(f,t.node),t.p2=T,t.h2<0?g.push(t):g.updateItem(t.h2));var i=t.g1+t.g2;i<N&&(N=i,h=t)}}}}};var b=d.NO_PATH;k.l2=s,k.l1=h;var E={aStar:S,aGreedy:l,nba:k};window.ngraph={graph:function(i){"uniqueLinkId"in(i=i||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now own each graph\nis considered to be not a multigraph by default (each edge is unique)."),i.multigraph=i.uniqueLinkId),void 0===i.multigraph&&(i.multigraph=!1);var a,u="function"==typeof Object.create?Object.create(null):{},f=[],d={},c=0,s=0,h=Object.keys?function(e){if("function"==typeof e)for(var n=Object.keys(u),t=0;t<n.length;++t)if(e(u[n[t]]))return!0}:function(e){var n;if("function"==typeof e)for(n in u)if(e(u[n]))return!0},p=i.multigraph?function(e,n,t){var i=o(e,n),a=d.hasOwnProperty(i);if(a||y(e,n)){a||(d[i]=0);var u="@"+ ++d[i];i=o(e+u,n+u)}return new r(e,n,t,i)}:function(e,n,t){return new r(e,n,t,o(e,n))},l=[],I=O,v=O,g=O,N=O,S={addNode:T,addLink:function(e,n,r){g();var o=k(e)||T(e),i=k(n)||T(n),a=p(e,n,r);return f.push(a),t(o,a),e!==n&&t(i,a),I(a,"add"),N(),a},removeLink:E,removeNode:b,getNode:k,getNodesCount:function(){return c},getLinksCount:function(){return f.length},getLinks:function(e){var n=k(e);return n?n.links:null},forEachNode:h,forEachLinkedNode:function(e,n,t){var r=k(e);if(r&&r.links&&"function"==typeof n)return t?function(e,n,t){for(var r=0;r<e.length;++r){var o=e[r];if(o.fromId===n&&t(u[o.toId],o))return!0}}(r.links,e,n):function(e,n,t){for(var r=0;r<e.length;++r){var o=e[r],i=o.fromId===n?o.toId:o.fromId;if(t(u[i],o))return!0}}(r.links,e,n)},forEachLink:function(e){var n,t;if("function"==typeof e)for(n=0,t=f.length;n<t;++n)e(f[n])},beginUpdate:g,endUpdate:N,clear:function(){g(),h(function(e){b(e.id)}),N()},hasLink:y,hasNode:k,getLink:y};return function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],t=0;t<n.length;++t)if(e.hasOwnProperty(n[t]))throw new Error("Subject cannot be eventified, since it already has property '"+n[t]+"'")}(e);var n=function(e){var n=Object.create(null);return{on:function(t,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=n[t];return i||(i=n[t]=[]),i.push({callback:r,ctx:o}),e},off:function(t,r){if(void 0===t)return n=Object.create(null),e;if(n[t])if("function"!=typeof r)delete n[t];else for(var o=n[t],i=0;i<o.length;++i)o[i].callback===r&&o.splice(i,1);return e},fire:function(t){var r,o=n[t];if(!o)return e;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return e}}}(e);e.on=n.on,e.off=n.off,e.fire=n.fire}(S),a=S.on,S.on=function(){return S.beginUpdate=g=_,S.endUpdate=N=F,I=m,v=w,S.on=a,a.apply(S,arguments)},S;function m(e,n){l.push({link:e,changeType:n})}function w(e,n){l.push({node:e,changeType:n})}function T(e,t){if(void 0===e)throw new Error("Invalid node identifier");g();var r=k(e);return r?(r.data=t,v(r,"update")):(r=new n(e,t),c++,v(r,"add")),u[e]=r,N(),r}function k(e){return u[e]}function b(e){var n=k(e);if(!n)return!1;g();var t=n.links;if(t){n.links=null;for(var r=0;r<t.length;++r)E(t[r])}return delete u[e],c--,v(n,"remove"),N(),!0}function E(n){if(!n)return!1;var t=e(n,f);if(t<0)return!1;g(),f.splice(t,1);var r=k(n.fromId),o=k(n.toId);return r&&(t=e(n,r.links))>=0&&r.links.splice(t,1),o&&(t=e(n,o.links))>=0&&o.links.splice(t,1),I(n,"remove"),N(),!0}function y(e,n){var t,r=k(e);if(!r||!r.links)return null;for(t=0;t<r.links.length;++t){var o=r.links[t];if(o.fromId===e&&o.toId===n)return o}return null}function O(){}function _(){s+=1}function F(){0==(s-=1)&&l.length>0&&(S.fire("changed",l),l.length=0)}},path:E}}();